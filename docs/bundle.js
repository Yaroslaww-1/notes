!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setNotesListElement=t.createNotesListElement=void 0,n(13);var i=n(14);t.createNotesListElement=({notes:e,onNoteSelect:t})=>{const n=document.createElement("div");return n.className="notes-list",e.forEach(e=>{const s=(0,i.createNoteElement)({...e,title:e.getTitle(),textPreview:e.getTextPreview(),timestamp:e.getTimestamp(),onClick:()=>t(e)});n.appendChild(s)}),n};t.setNotesListElement=e=>{document.getElementsByClassName("notes-list")[0].replaceWith(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setNoteEditElement=t.createNoteEditElement=void 0,n(16);t.createNoteEditElement=({note:e,isEditable:t=!1,onNoteEdit:n})=>{const i=document.createElement("textarea");return i.value=(null==e?void 0:e.text)||"",i.className="note-edit",t||i.setAttribute("disabled",!0),i.addEventListener("input",()=>{n(e,i.value)}),i};t.setNoteEditElement=e=>{document.getElementsByClassName("note-edit")[0].replaceWith(e)}},function(e,t,n){"use strict";n(3);var i=n(4),s=n(6),o=n(9),r=n(0),c=n(1);const l=new i.NotesService,a=e=>{console.log(l.getSelectedNote(),l.notes.map(e=>e.isSelected));return(0,o.createRootElement)({notes:l.notes,selectedNote:l.getSelectedNote(),onNoteCreate:()=>l.addNote(new s.Note({})),onNoteDelete:()=>l.deleteSelectedNote(),onNoteSelect:e=>l.selectNote(e),onNoteEdit:(e,t)=>{e.text=t,l.updateNoteById(e.id,e)},isEditable:!!l.getSelectedNote(),...e})};l.subscribe("updateNotes",()=>{(0,o.setRootElement)(a())}),l.subscribe("updateNotesList",()=>{(0,r.setNotesListElement)((0,r.createNotesListElement)({notes:l.notes,onNoteSelect:e=>l.selectNote(e)}))}),l.subscribe("updateNoteEdit",()=>{(0,c.setNoteEditElement)((0,c.createNoteEditElement)({note:l.getSelectedNote(),isEditable:!0,onNoteEdit:(e,t)=>{e.text=t,l.updateNoteById(e.id,e)}}))}),(0,o.setRootElement)(a())},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotesService=void 0;var i=n(5);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var r=new WeakMap,c=new WeakMap;class l extends i.EventManager{constructor(){super(),s(this,"addNote",e=>{o(this,r).call(this),this.notes.push(e),this.selectNote(e),o(this,c).call(this),this.notify("updateNotes",this.notes)}),s(this,"deleteNote",e=>{this.notes.reduce((t,n)=>n.id===e.id?[t,n]:t),this.notify("updateNotes",this.notes)}),s(this,"deleteSelectedNote",()=>{const e=this.getSelectedNote();e&&(this.notes=this.notes.filter(t=>t.id!==e.id),this.notify("updateNotes",this.notes))}),s(this,"selectNote",e=>{o(this,r).call(this),e.isSelected=!0,this.updateNoteById(e.id,e),this.notify("updateNoteEdit")}),s(this,"getSelectedNote",()=>this.notes.find(e=>e.isSelected)),s(this,"updateNoteById",(e,t)=>{this.notes=this.notes.map(n=>(n.id===e&&(n=t),n)),this.notify("updateNotesList",this.notes)}),r.set(this,{writable:!0,value:()=>{this.notes=this.notes.map(e=>(e.isSelected=!1,e)),this.notify("updateNotes",this.notes)}}),c.set(this,{writable:!0,value:()=>{this.notes.sort((e,t)=>new Date(t.getFullTimestamp())-new Date(e.getFullTimestamp()))}}),this.notes=[]}}t.NotesService=l},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0;t.EventManager=class{constructor(){i(this,"subscribe",(e,t)=>{this.listeners.get(e)?this.listeners.get(e).push(t):this.listeners.set(e,[t])}),i(this,"unsubscribe",(e,t)=>{this.listeners.set(e,this.listeners.get(e).filter(e=>e!==t))}),i(this,"notify",(e,t)=>{this.listeners.get(e)&&this.listeners.get(e).forEach(e=>e(t))}),this.listeners=new Map}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Note=void 0;var i=n(7),s=n(8);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Note=class{constructor({text:e="",createdAt:t=new Date,updatedAt:n=null,isSelected:r=!1}){o(this,"getTimestamp",()=>(0,i.getDayMonthYearFormat)(this.updatedAt?this.updatedAt:this.createdAt)),o(this,"getFullTimestamp",()=>this.updatedAt?this.updatedAt:this.createdAt),o(this,"getTextPreview",()=>this.text.slice(0,25)),o(this,"getTitle",()=>{if(""===this.text)return"New Note";const e=this.text.indexOf("\n");if(-1==e)return this.text;return this.text.slice(0,e+1)}),o(this,"unselect",()=>this.isSelected=!1),o(this,"select",()=>this.isSelected=!0),this.id=(0,s.createUUID)(),this.isSelected=r,this.text=e,this.createdAt=t,this.updatedAt=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDayMonthYearFormat=void 0;t.getDayMonthYearFormat=e=>e.toISOString().split("T")[0]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUUID=void 0;t.createUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRootElement=t.createRootElement=void 0,n(10);var i=n(11),s=n(0),o=n(1);t.createRootElement=({notes:e,onNoteCreate:t,onNoteDelete:n,onNoteSelect:r,onNoteEdit:c,isEditable:l,selectedNote:a})=>{const d=document.createElement("div");d.setAttribute("id","root");const u=(0,i.createHeader)({onNoteCreate:t,onNoteDelete:n});d.appendChild(u);const h=document.createElement("div");h.className="main-content";const m=(0,s.createNotesListElement)({notes:e,onNoteSelect:r});h.appendChild(m);const p=(0,o.createNoteEditElement)({note:a,isEditable:l,onNoteEdit:c});return h.appendChild(p),d.appendChild(h),d};t.setRootElement=e=>{document.getElementById("root").replaceWith(e)}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHeader=void 0,n(12);t.createHeader=({onNoteCreate:e,onNoteDelete:t})=>{const n=document.createElement("div");n.className="header";const i=document.createElement("button");i.innerHTML="Add note",i.addEventListener("click",e),n.appendChild(i);const s=document.createElement("button");return s.innerHTML="Delete note",s.addEventListener("click",t),n.appendChild(s),n}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNoteElement=void 0,n(15);t.createNoteElement=({title:e,timestamp:t,textPreview:n,isSelected:i,onClick:s})=>{const o=document.createElement("div");o.className="note",i&&o.setAttribute("selected",!0),o.addEventListener("click",s);const r=document.createElement("div");r.className="header",r.innerHTML=e,o.appendChild(r);const c=document.createElement("div");c.className="content";const l=document.createElement("div");l.className="timestamp",l.innerHTML=t,c.appendChild(l);const a=document.createElement("div");return a.className="preview",a.innerHTML=n,c.appendChild(a),o.appendChild(c),o}},function(e,t,n){},function(e,t,n){}]);